{% extends 'marketing/base.html.twig' %}

{% block title %}Pricing - Pushify{% endblock %}

{% block meta_description %}Simple, transparent pricing for server deployments. Pay for the server type you need, deploy unlimited projects.{% endblock %}

{% block body %}
	<!-- Hero -->
	<section class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-20 text-center">
		<h1 class="text-4xl md:text-5xl font-bold mb-4">
			Simple,
			<span class="gradient-text">Transparent Pricing</span>
		</h1>
		<p class="text-xl text-gray-400 max-w-3xl mx-auto mb-8">
			Choose the server type that fits your needs. Deploy unlimited projects on each server.
		</p>

		<!-- Important Notice -->
		<div class="max-w-3xl mx-auto mb-12 p-6 bg-blue-500/10 border border-blue-500/30 rounded-xl">
			<div class="flex items-start gap-3">
				<svg class="w-6 h-6 text-blue-400 flex-shrink-0 mt-0.5" fill="none" stroke="currentColor" viewbox="0 0 24 24">
					<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
				</svg>
				<div class="text-left">
					<p class="text-blue-300 font-medium mb-1">How Subscriptions Work</p>
					<p class="text-sm text-blue-400">
						Each subscription is tied to a specific server type. You can create
						<strong>unlimited servers</strong>
						of that type and deploy
						<strong>unlimited projects</strong>
						on those servers. Need different server types? You can subscribe to multiple plans.
					</p>
				</div>
			</div>
		</div>
	</section>

	<!-- Pricing Cards -->
	<section class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 pb-20">
		<div class="grid md:grid-cols-2 lg:grid-cols-3 gap-6">
			{% for plan in pricing %}
				<div class="relative bg-gray-800/50 border rounded-xl p-6 hover:border-primary/50 transition-all {{ plan.recommended ? 'border-primary lg:scale-105' : 'border-gray-700/50' }}">
					<!-- Recommended Badge -->
					{% if plan.recommended %}
						<div class="absolute -top-4 left-1/2 -translate-x-1/2">
							<span class="px-4 py-1.5 bg-primary text-white text-xs font-semibold rounded-full shadow-lg">
								Recommended
							</span>
						</div>
					{% endif %}

					<!-- Server Type -->
					<div class="text-center mb-6 pt-2">
						<h3 class="text-2xl font-bold text-white mb-2">{{ plan.name|upper }}</h3>

						{% if plan.specs.cores %}
							<p class="text-sm text-gray-400">
								{{ plan.specs.cores }}
								vCPU •
								{{ plan.specs.memory }}GB RAM •
								{{ plan.specs.disk }}GB SSD
							</p>
						{% endif %}
					</div>

					<!-- Pricing -->
					<div class="text-center mb-6 pb-6 border-b border-gray-700">
						<div class="flex items-baseline justify-center gap-1 mb-2">
							<span class="text-4xl font-bold text-white">€{{ plan.pricing.final_price_eur }}</span>
							<span class="text-gray-400">/month</span>
						</div>
						<p class="text-xs text-gray-500">≈ ${{ plan.pricing.final_price_usd }}
							USD</p>

						<!-- Pricing Breakdown -->
						<details class="mt-3 text-xs text-left">
							<summary class="cursor-pointer text-gray-500 hover:text-gray-400 transition-colors">View pricing breakdown</summary>
							<div class="mt-2 p-3 bg-gray-900/50 rounded-lg space-y-1 text-gray-400">
								<div class="flex justify-between">
									<span>Server Cost (Hetzner):</span>
									<span>€{{ plan.pricing.cost_eur }}</span>
								</div>
								<div class="flex justify-between">
									<span>Platform Fee ({{ plan.pricing.markup_percentage }}%):</span>
									<span>€{{ (plan.pricing.final_price_eur - plan.pricing.cost_eur)|number_format(2, '.', ',') }}</span>
								</div>
								<div class="flex justify-between font-semibold text-white pt-1 border-t border-gray-700">
									<span>Total:</span>
									<span>€{{ plan.pricing.final_price_eur }}</span>
								</div>
							</div>
						</details>
					</div>

					<!-- Features -->
					<ul class="space-y-3 mb-6">
						{% for feature in plan.features %}
							<li class="flex items-start gap-2 text-sm">
								<svg class="w-5 h-5 text-green-500 flex-shrink-0" fill="none" stroke="currentColor" viewbox="0 0 24 24">
									<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path>
								</svg>
								<span class="text-gray-300">{{ feature }}</span>
							</li>
						{% endfor %}
					</ul>

					<!-- CTA -->
					<a href="{{ path('app_billing_checkout_page', {server_type: plan.name}) }}" class="block w-full py-3 px-4 rounded-lg font-semibold text-center transition-all {{ plan.recommended ? 'bg-primary hover:bg-primary/90 text-white' : 'bg-gray-700 hover:bg-gray-600 text-white' }}">
						Subscribe to
						{{ plan.name|upper }}
					</a>
				</div>
			{% endfor %}
		</div>

		<!-- All Features Included -->
		<div class="mt-16 text-center">
			<p class="text-gray-400 mb-4">All plans include:</p>
			<div class="flex flex-wrap items-center justify-center gap-6 text-sm text-gray-500">
				<span class="flex items-center gap-2">
					<svg class="w-4 h-4 text-green-500" fill="none" stroke="currentColor" viewbox="0 0 24 24">
						<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path>
					</svg>
					7-day money-back guarantee
				</span>
				<span class="flex items-center gap-2">
					<svg class="w-4 h-4 text-green-500" fill="none" stroke="currentColor" viewbox="0 0 24 24">
						<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path>
					</svg>
					Cancel anytime
				</span>
				<span class="flex items-center gap-2">
					<svg class="w-4 h-4 text-green-500" fill="none" stroke="currentColor" viewbox="0 0 24 24">
						<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path>
					</svg>
					Email support
				</span>
				<span class="flex items-center gap-2">
					<svg class="w-4 h-4 text-green-500" fill="none" stroke="currentColor" viewbox="0 0 24 24">
						<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path>
					</svg>
					99.9% uptime
				</span>
			</div>
		</div>
	</section>

	<!-- Comparison Table -->
	<section class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 pb-20">
		<div class="text-center mb-12">
			<h2 class="text-3xl font-bold mb-4">Compare Server Types</h2>
			<p class="text-gray-400">Choose the right size for your workload</p>
		</div>

		<div class="overflow-x-auto">
			<table class="w-full bg-gray-800/50 border border-gray-700/50 rounded-xl overflow-hidden">
				<thead class="bg-gray-900/50">
					<tr>
						<th class="px-6 py-4 text-left text-sm font-semibold text-gray-300">Server Type</th>
						<th class="px-6 py-4 text-left text-sm font-semibold text-gray-300">vCPU</th>
						<th class="px-6 py-4 text-left text-sm font-semibold text-gray-300">RAM</th>
						<th class="px-6 py-4 text-left text-sm font-semibold text-gray-300">Storage</th>
						<th class="px-6 py-4 text-left text-sm font-semibold text-gray-300">Price/Month</th>
						<th class="px-6 py-4 text-left text-sm font-semibold text-gray-300">Best For</th>
					</tr>
				</thead>
				<tbody class="divide-y divide-gray-700/50">
					{% for plan in pricing %}
						<tr class="hover:bg-gray-700/30 transition-colors">
							<td class="px-6 py-4">
								<span class="font-semibold text-white">{{ plan.name|upper }}</span>
								{% if plan.recommended %}
									<span class="ml-2 px-2 py-0.5 bg-primary/20 text-primary text-xs rounded-full">Popular</span>
								{% endif %}
							</td>
							<td class="px-6 py-4 text-gray-300">{{ plan.specs.cores }}</td>
							<td class="px-6 py-4 text-gray-300">{{ plan.specs.memory }}GB</td>
							<td class="px-6 py-4 text-gray-300">{{ plan.specs.disk }}GB SSD</td>
							<td class="px-6 py-4">
								<span class="font-semibold text-white">€{{ plan.pricing.final_price_eur }}</span>
								<span class="text-xs text-gray-500">/mo</span>
							</td>
							<td class="px-6 py-4 text-sm text-gray-400">
								{% if plan.name == 'cx11' %}
									Small apps, testing
								{% elseif plan.name == 'cx22' %}
									Most production apps
								{% elseif plan.name == 'cx31' %}
									Medium workloads
								{% elseif plan.name == 'cx41' %}
									Heavy applications
								{% elseif plan.name == 'cx51' %}
									Enterprise workloads
								{% else %}
									Production ready
								{% endif %}
							</td>
						</tr>
					{% endfor %}
				</tbody>
			</table>
		</div>
	</section>

	<!-- FAQ Preview -->
	<section class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 pb-20">
		<div class="text-center mb-12">
			<h2 class="text-3xl font-bold mb-4">Frequently Asked Questions</h2>
		</div>

		<div class="space-y-4">
			<details class="group bg-gray-800/50 border border-gray-700/50 rounded-xl p-6 hover:border-primary/50 transition-all">
				<summary class="cursor-pointer font-semibold text-white flex items-center justify-between">
					<span>Can I create multiple servers?</span>
					<svg class="w-5 h-5 text-gray-400 group-open:rotate-180 transition-transform" fill="none" stroke="currentColor" viewbox="0 0 24 24">
						<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
					</svg>
				</summary>
				<p class="mt-4 text-gray-400">
					Yes! You can create as many servers as you need, but they must all be the same type as your subscription. For example, if you subscribe to CX22, you can create unlimited CX22 servers.
				</p>
			</details>

			<details class="group bg-gray-800/50 border border-gray-700/50 rounded-xl p-6 hover:border-primary/50 transition-all">
				<summary class="cursor-pointer font-semibold text-white flex items-center justify-between">
					<span>How many projects can I deploy?</span>
					<svg class="w-5 h-5 text-gray-400 group-open:rotate-180 transition-transform" fill="none" stroke="currentColor" viewbox="0 0 24 24">
						<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
					</svg>
				</summary>
				<p class="mt-4 text-gray-400">
					Unlimited! You can deploy as many projects as your server resources can handle. Each server can host multiple applications simultaneously.
				</p>
			</details>

			<details class="group bg-gray-800/50 border border-gray-700/50 rounded-xl p-6 hover:border-primary/50 transition-all">
				<summary class="cursor-pointer font-semibold text-white flex items-center justify-between">
					<span>Can I change my server type?</span>
					<svg class="w-5 h-5 text-gray-400 group-open:rotate-180 transition-transform" fill="none" stroke="currentColor" viewbox="0 0 24 24">
						<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
					</svg>
				</summary>
				<p class="mt-4 text-gray-400">
					Yes. You can cancel your current subscription and subscribe to a different server type. Your existing servers will continue to work, but you won't be able to create new ones until you have an active subscription.
				</p>
			</details>
		</div>

		<div class="text-center mt-8">
			<a href="{{ path('marketing_faq') }}" class="text-primary hover:text-primary/80 font-medium inline-flex items-center gap-2">
				<span>View all FAQs</span>
				<svg class="w-4 h-4" fill="none" stroke="currentColor" viewbox="0 0 24 24">
					<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path>
				</svg>
			</a>
		</div>
	</section>

	<!-- CTA -->
	<section class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 pb-20">
		<div class="bg-gradient-to-br from-primary/20 to-purple-500/20 border border-primary/50 rounded-2xl p-12 text-center">
			<h2 class="text-3xl font-bold mb-4">Ready to Deploy?</h2>
			<p class="text-xl text-gray-300 mb-8">Start with our recommended CX22 plan</p>
			<a href="{{ path('app_billing_checkout_page', {server_type: 'cx22'}) }}" class="inline-flex items-center gap-2 px-8 py-4 bg-primary hover:bg-primary/90 text-white font-semibold rounded-lg transition-all">
				<span>Get Started Now</span>
				<svg class="w-5 h-5" fill="none" stroke="currentColor" viewbox="0 0 24 24">
					<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 7l5 5m0 0l-5 5m5-5H6"></path>
				</svg>
			</a>
		</div>
	</section>
{% endblock %}
